<!DOCTYPE html>
<html lang="en">
  <head>

  <link rel="stylesheet"
        href="lib/bootstrap/css/bootstrap.css" />
  <script
       src="lib/jquery-1.9.1.min.js">
  </script>

  <title>Girls Day 2013</title>
  
  </head>
<body>

<h1>Willkommen beim Girls Day</h1>

Beispiel
<select id="select_lesson">
  <option>---</option>
  <option value="lesson_1">Willkommen</option>
  <option value="lesson_2">Variablen</option>
  <option value="lesson_3">Schleifen</option>
  <option value="lesson_4">Funktionen</option>
  <option value="lesson_5">Arrays</option>
</select>

<div style="display:none">

<div id="lesson_1">
// Willkommen beim Girls Day!
canvas.fillText("Willkommen", 10, 100);
</div>

<div id="lesson_2">
var x=10;
var y=200;
canvas.fillText("Willkommen", x, y);
</div>

<div id="lesson_3">
for (i=0;i<10;i++) {
    canvas.fillText(i, i*10, i*20);
}
</div>

<div id="lesson_4">
function draw_smile() {
    for (i=0; i < 5; i++) {
        var x = random(0, canvas.width);
        var y = random(0, canvas.height);
        canvas.drawImage(smiley, x, y);
    }
}
draw_smile();
</div>

<div id="lesson_5">
// Willkommen beim Girls Day!
function welcome(names) {
    for (i=0; i < names.length; i++) {
        var current_name = names[i];
        var x = random(0, canvas.width);
        var y = random(0, canvas.height);
        canvas.fillText(current_name, x, y);
    }
}
welcome(["Marie", "Helena"]);
</div>

</div>


<div class="row" style="margin-right:auto; magin-left:auto;">
  <div class="span6">
    Programm
    <div id="editor" style="min-height:500px; font-size:18px">
      "Hallo!"
    </div>
    <span><button onclick="run_code()">Run!</button></span>
  </div>

  <div class="span6"> 
    <div>
      Ausgabe
    </div>
    <div>
      <canvas id="output_canvas" width="600" height="500"
	      style="border:1px solid black;">
      </canvas>
    </div>
    <span><button onclick="clear_canvas()">Clear</button></span>
  </div>

</div>

<script src="lib/ace-builds/src/ace.js" 
	type="text/javascript" charset="utf-8">
</script>
<script>
  function run_code() {
      var code = editor.getValue();
      try {
          if(is_sad)
              clear_canvas();
          eval(code);
          is_sad = false;
      } catch(e) {
          clear_canvas();
          var padding = 5;
          canvas.drawImage(sad, padding, padding);
          canvas.fillText("Autsch: " + e, padding+sad.width+5, sad.height);
          is_sad = true;
      }
  }
  function clear_canvas() {
      canvas.clearRect(0, 0, canvas.width, canvas.height);  
  }
  // helper to avoid having to clear about Math.floor() etc in the visible code
  function random(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
  }
  $("#select_lesson").change(function() {
      var lesson = "#" + this.value;
      var code = $(lesson).text();
      editor.setValue(code);
  });
  var is_sad = false;
  var c = document.getElementById("output_canvas");
  // yes, strictly this is not a canvas but the context
  var canvas = c.getContext("2d");
  // make the life of my students even more easier
  canvas.width = c.width;
  canvas.height = c.height;
  // get some assets
  var smiley = new Image();
  smiley.src = "assets/smile.png";
  var sad = new Image();
  sad.src = "assets/sad.png";

  // set some defaults
  canvas.font = "20px Verdana";
  // setup the editor
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/terminal");
  editor.getSession().setMode("ace/mode/javascript");
</script>
</body>
</html>
